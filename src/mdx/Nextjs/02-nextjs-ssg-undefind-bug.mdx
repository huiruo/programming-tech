
æˆ‘æ’æŸ¥äº†ä¸‹å½“ `<SiteFooter />` ç»„ä»¶è¢«åŠ è½½ï¼Œ`<Link href={href} className="flex-1 flex flex-col items-center justify-center">`
è¢«æ¸²æŸ“ï¼Œè§£å†³nginx è¯·æ±‚http://localhost:8080/ æŠ¥é”™ http://localhost:8080/_next/data/e1e5bHZwZu6frz91FQ-Lo/undefined.json?locale=undefined    æ˜¯ä»€ä¹ˆåŸå› ï¼Ÿä¸‹é¢æ˜¯æˆ‘çš„ä»£ç ï¼š import Layout from '@/components/layout/Layout'
```js
function App({ Component, pageProps }: AppProps) {

  useEffect(() => {
    setConsole()
  }, [])

  return <>
    <Head>
      <title>Hfun</title>
      <meta
        name="viewport"
        content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no,viewport-fit=cover"
      />
      <meta name="format-detection" content="telephone=no" />
      <meta name="keywords" content="Hfun" />
      <meta name="description" content="Hfun" />
      <meta property="og:image" content="https://h5.sada.mobi/pay/mainLogo.png" />
      <link rel="icon" href="/mainLogo.png" sizes="any" />
    </Head>
    <ClientOnly>
      <Layout>
        <Provider store={store}>
          <Component {...pageProps} />
        </Provider>
      </Layout>
    </ClientOnly>
  </>
}

export default appWithTranslation(App)  import { ReactNode } from "react";
import { SiteFooter } from "./SiteFooter";

export default function Layout({ children }: {
  children: ReactNode
}) {
  return (
    <main className="min-h-screen relative bg-gray-10">

      <div className="main">{children}</div>
      <SiteFooter />
    </main>
  )
}  import { LinkItem } from './LinkItem'
import { useRouter } from 'next/router'
import { usePathname } from 'next/navigation'

export const SiteFooter = () => {
  const pathname = usePathname() || ''
  const router = useRouter()
  const locale = router.query.locale

  // console.log('%c=SiteFooter==?>', 'color:red', { locale, pathname })

  return (
    <div className="h-14 fixed bottom-0 left-0 w-full flex justify-center items-center border-t border-foreground/5 bg-amber-300">
      <LinkItem
        href={/${locale}/}
        icon={null}
        text="Home"
        isActive={pathname === /}
      />

      <LinkItem
        href={/${locale}/promotion}
        icon={null}
        text="Promotion"
        isActive={pathname === /promotion}
      />

      <LinkItem
        href={/${locale}/deposit}
        icon={null}
        text="Deposit"
        isActive={pathname === /deposit}
      // isActive={pathname.startsWith(/deposit)}
      />

      <LinkItem
        href={/${locale}/withdrawal}
        icon={null}
        text="Withdrawal"
        isActive={pathname === /withdrawal}
      />

      <LinkItem
        href={/${locale}/profile}
        icon={null}
        text="Profile"
        isActive={pathname === /profile}
      />
    </div>
  )
}  import { cn } from '@/lib/utils'
import Link from 'next/link'
import { ReactNode } from 'react'

interface LinkItemProps {
  href: string
  icon: ReactNode
  text: string
  isActive: boolean
}

export const LinkItem = ({ href, icon, text, isActive }: LinkItemProps) => {
  return (
    <Link
      href={href}
      className="flex-1 flex flex-col items-center justify-center"
    >
      <div
        className={cn(
          'inline-flex text-foreground/50',
          isActive && 'text-foreground',
        )}
      >
        {icon}
      </div>
      <div
        className={cn(
          'text-xs text-foreground/60',
          isActive && 'text-foreground',
        )}
      >
        {text}
      </div>
    </Link>
  )
} 
```

æ—¢ç„¶ä½ ä½¿ç”¨çš„æ˜¯ SSG (Static Site Generation)ï¼Œé‚£ä¹ˆ router.query.locale åœ¨æ„å»ºæ—¶ (yarn build) å¹¶ä¸å­˜åœ¨ï¼Œå› ä¸º SSG ç”Ÿæˆçš„é¡µé¢ æ˜¯é™æ€çš„ï¼Œä¸ä¼šåœ¨åˆå§‹åŠ è½½æ—¶è¿è¡Œ useRouter() æ¥è·å– query å‚æ•°ã€‚

ä½ çš„ SiteFooter ç»„ä»¶çš„ href è®¡ç®—é”™è¯¯ï¼Œå¯¼è‡´ é™æ€ HTML ç”Ÿæˆçš„æ˜¯ href="/undefined/"ï¼Œå¹¶æœ€ç»ˆè§¦å‘ undefined.json?locale=undefined 404 é”™è¯¯ã€‚


## è§£å†³
ç¡®ä¿ locale ç”± getStaticProps ä¼ é€’
åœ¨ getStaticProps é‡Œæ˜ç¡®ä¼ é€’ localeï¼Œé¿å… router.query.locale æœªå®šä¹‰
```js
export async function getStaticProps(ctx: GetStaticPropsContext) {
  const locale = (ctx.params?.locale as string) || defaultLocale;

  try {
    const response = await fetch(`http://localhost:3010/messages/${locale}.json`);
    const messages = await response.json();

    return {
      props: {
        locale, // ä¼ é€’ locale
        messages: messages || { Index: {} },
      },
    };
  } catch (error) {
    console.error("Error loading locale messages:", error);
    return {
      props: {
        locale,
        messages: { Index: {} },
      },
    };
  }
}
```

### æ­¥éª¤2.ä¿®æ”¹ App.tsx
åœ¨ _app.tsx é‡Œç¡®ä¿ pageProps.locale æ€»æ˜¯å­˜åœ¨ï¼š
```js
export default function App({ Component, pageProps }: AppProps) {
  const router = useRouter();
  const locale = pageProps.locale || router.locale || defaultLocale; // pageProps é‡Œè·å– locale

  return (
    <NextIntlClientProvider locale={locale} messages={pageProps.messages}>
      <Layout locale={locale}> {/* ä¼ é€’ locale */}
        <Component {...pageProps} />
      </Layout>
    </NextIntlClientProvider>
  );
}
```

ğŸ“ ä¿®æ”¹ Layout.tsx
```js
export default function Layout({
  children,
  locale,
}: {
  children: ReactNode;
  locale: string;
}) {
  return (
    <main className="min-h-screen relative bg-gray-10">
      <div className="main">{children}</div>
      <SiteFooter locale={locale} /> {/* ä¼ é€’ locale */}
    </main>
  );
}
```

ğŸ“ ä¿®æ”¹ SiteFooter.tsx
```js
export const SiteFooter = ({ locale }: { locale: string }) => {
  const pathname = usePathname() || "";

  return (
    <div className="h-14 fixed bottom-0 left-0 w-full flex justify-center items-center border-t border-foreground/5 bg-amber-300">
      <LinkItem href={`/${locale}/`} icon={null} text="Home" isActive={pathname === `/${locale}/`} />
      <LinkItem href={`/${locale}/promotion`} icon={null} text="Promotion" isActive={pathname === `/${locale}/promotion`} />
      <LinkItem href={`/${locale}/deposit`} icon={null} text="Deposit" isActive={pathname === `/${locale}/deposit`} />
      <LinkItem href={`/${locale}/withdrawal`} icon={null} text="Withdrawal" isActive={pathname === `/${locale}/withdrawal`} />
      <LinkItem href={`/${locale}/profile`} icon={null} text="Profile" isActive={pathname === `/${locale}/profile`} />
    </div>
  );
};
```